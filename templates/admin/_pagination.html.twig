{% set prev = page > 1 ? page - 1 : 1 %}
{% set next = page < totalPages ? page + 1 : totalPages %}
{% set perPage = per_page|default(app.request.query.get('per_page')|default(25)) %}

<div class="d-flex justify-content-between align-items-center mt-2">
  <nav aria-label="Pagination" class="mb-0">
    <ul class="pagination mb-0">
      <li class="page-item {{ page == 1 ? 'disabled' }}">
        {% set qs_prev = app.request.query.all | merge({'page': prev}) %}
        <a class="page-link" href="{{ path(app.request.attributes.get('_route'), qs_prev) }}">Précédent</a>
      </li>

      <li class="page-item disabled"><span class="page-link">Page {{ page }} / {{ totalPages }}</span></li>

      <li class="page-item {{ page == totalPages ? 'disabled' }}">
        {% set qs_next = app.request.query.all | merge({'page': next}) %}
        <a class="page-link" href="{{ path(app.request.attributes.get('_route'), qs_next) }}">Suivant</a>
      </li>
    </ul>
  </nav>

  <form method="get" class="d-flex align-items-center" style="gap:.5rem;">
    {# Conserver les autres paramètres (hors per_page et page) #}
    {% for k, v in app.request.query.all %}
      {% if k != 'per_page' and k != 'page' %}
        <input type="hidden" name="{{ k }}" value="{{ v }}">
      {% endif %}
    {% endfor %}
    <input type="hidden" name="page" value="1">
    <label class="mb-0 text-muted" for="per-page-input">Par page</label>
    <input id="per-page-input" type="number" name="per_page" class="form-control" style="width: 90px"
           min="5" max="200" value="{{ perPage }}" title="Par page">
    <button class="btn btn-outline-secondary">OK</button>
  </form>
</div>

